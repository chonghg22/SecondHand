<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.secondhand.mapper.ItemReportDeferMapper">
	<select id="itemReportDeferList" parameterType="com.project.secondhand.vo.ItemReportDeferAndItemAndMember" resultType="com.project.secondhand.vo.ItemReportDeferAndItemAndMember">
		SELECT
			ir.item_report_defer_no AS itemReportDeferNo,
			ir.item_no AS itemNo,
			ir.member_no AS memberNo,
			ir.category_name AS categoryName,
			ir.item_report_defer_content AS itemReportDeferContent,
			ir.item_report_defer_date AS itemReportDeferDate,
			i.item_title AS itemTitle,
			i.item_content AS itemContent,
			m.member_nickname AS memberNickname
		FROM market_item_report_defer ir 
		INNER JOIN market_item i ON ir.item_no=i.item_no
		INNER JOIN market_member m ON ir.member_no=m.member_no
			
	</select>
	<select id="itemReportDeferInfo" parameterType="com.project.secondhand.vo.ItemReportDeferAndItemAndMember" resultType="com.project.secondhand.vo.ItemReportDeferAndItemAndMember">
		SELECT
			ir.item_report_defer_no AS itemReportDeferNo,
			ir.item_no AS itemNo,
			ir.member_no AS memberNo,
			ir.category_name AS categoryName,
			ir.item_report_defer_content AS itemReportDeferContent,
			ir.item_report_defer_date AS itemReportDeferDate,
			i.item_title AS itemTitle,
			i.item_content AS itemContent,
			m.member_nickname AS memberNickname
		FROM market_item_report_defer ir 
		INNER JOIN market_item i ON ir.item_no=i.item_no
		INNER JOIN market_member m ON ir.member_no=m.member_no
		WHERE ir.item_report_defer_no = #{itemReportDeferNo}
	</select>
	<insert id="addItemReportDefer" parameterType="com.project.secondhand.vo.ItemReportResultAndItemAndMember">
		INSERT INTO 
		market_item_report_defer(
			item_report_defer_no,
			item_no,
			member_no,
			category_name,
			item_report_defer_content,
			item_report_defer_date
		)VALUES(
			#{itemReportDeferNo},
			#{itemNo},
			#{memberNo},
			#{categoryName},
			#{itemReportDeferContent},
			NOW())
	</insert>
	<delete id="removeItemReportDefer" parameterType="int">
		DELETE FROM market_item_report_defer
		WHERE item_report_defer_no =#{itemReportDeferNo}
	</delete>
</mapper>